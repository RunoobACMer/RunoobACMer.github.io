<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://RunoobACMer.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">





  
  
  <link rel="canonical" href="https://RunoobACMer.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Hexo</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/08/17/模拟2019牛客暑期多校训练营第十场Coffee-Chicken/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/17/模拟2019牛客暑期多校训练营第十场Coffee-Chicken/" class="post-title-link" itemprop="url">模拟2019牛客暑期多校训练营第十场CoffeeChicken</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-17 22:59:54 / Modified: 23:35:04" itemprop="dateCreated datePublished" datetime="2019-08-17T22:59:54+08:00">2019-08-17</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://ac.nowcoder.com/acm/contest/890/B" target="_blank" rel="noopener">题目链接</a><br><img src="//RunoobACMer.github.io/2019/08/17/模拟2019牛客暑期多校训练营第十场Coffee-Chicken/1.png" alt="图挂了"><br><img src="//RunoobACMer.github.io/2019/08/17/模拟2019牛客暑期多校训练营第十场Coffee-Chicken/2.png" alt="图挂了"></p>
<h2 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h2><p>原因归结在比赛的状态差（懒散）<br>思路有，比赛时没做出来。   回来洗个脸就找到bug了。</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ol>
<li>找真实数据范围。<ul>
<li>大于60分为奇数偶数，化成57，56. (否则内存过大，段错误)</li>
</ul>
</li>
<li>画出流程图（至少流程要写出来）别再一边敲一边想思路。</li>
<li>出bug很正常，不要着急，稳住心态。<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2></li>
<li>大于57，58，化成57，58。</li>
<li>每一个大于2的str，有三种情况：<br>(1)全部在左区间（str[n-2]）映射到str[n-2]<br>(2)全部在右区间（str[n-1]）映射到str[n-1]<br>(3)在中间 映射到str[n-1]从k到结尾 &amp; str[n-2]开头的len-k长度   </li>
<li>分类讨论，化为str[1]和str[2]。    <h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn =  62;</span><br><span class="line">ll sum[maxn+10];</span><br><span class="line">string s1 = &quot; COFFEE&quot;;</span><br><span class="line">string s2 = &quot; CHICKEN&quot;;</span><br><span class="line">string s3 = &quot; COFFEECHICKEN&quot;;</span><br><span class="line">string s4 = &quot; CHICKENCOFFEECHICKEN&quot;;</span><br><span class="line">string ans;</span><br><span class="line"></span><br><span class="line">void init() &#123;</span><br><span class="line">    sum[1] = 6,sum[2] = 7;</span><br><span class="line">    for(int i=3; i&lt;=60; i++) &#123;</span><br><span class="line">        sum[i]  = sum[i-1] + sum[i-2];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    init();</span><br><span class="line">    int t;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">    ll k,n;</span><br><span class="line">    while(t--) &#123;</span><br><span class="line">        scanf(&quot;%lld%lld&quot;,&amp;n,&amp;k);</span><br><span class="line">        ans  = &quot;&quot;;                  ///清空ans 我真是个小天才</span><br><span class="line">        if(n&gt;56) &#123;                  </span><br><span class="line">            if(n%2==1)</span><br><span class="line">                n=57;           ///找到真实数据范围 避免段错误（调用内存过大）</span><br><span class="line">            else</span><br><span class="line">                n=56;</span><br><span class="line">        &#125;</span><br><span class="line">        int len = 10;</span><br><span class="line">        while(1)&#123;</span><br><span class="line">            if(n&lt;=2)</span><br><span class="line">                break;</span><br><span class="line">            if(len + k-1 &gt; sum[n-2] &amp;&amp; k&lt;=sum[n-2])&#123;</span><br><span class="line">                if(n%2==1)&#123;                                                ///ans = str + ans;用法新奇</span><br><span class="line">                    ans = s4.substr(1,min(sum[n-1],len+k-sum[n-2]-1)) + ans;</span><br><span class="line">                    len = 1+sum[n-2]-k;</span><br><span class="line">                &#125;</span><br><span class="line">                else&#123;</span><br><span class="line">                    ans = s3.substr(1,min(sum[n-1],len+k-sum[n-2]-1)) + ans;</span><br><span class="line">                    len = 1+sum[n-2]-k;</span><br><span class="line">                &#125;</span><br><span class="line">                n = n-2;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            if(n==1 || n==2)</span><br><span class="line">                break;</span><br><span class="line">            if(sum[n-2]&lt;k)&#123;</span><br><span class="line">                n = n-1;</span><br><span class="line">                k = k - sum[n-1];</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            if(sum[n-2] &gt;= k)&#123;</span><br><span class="line">                n = n-2;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(n==1)&#123;</span><br><span class="line">            if(len+k-1&gt;=6)</span><br><span class="line">                ans = s1.substr(k) +ans ;</span><br><span class="line">            else</span><br><span class="line">                ans = s1.substr(k,len) + ans;</span><br><span class="line">        &#125;</span><br><span class="line">        if(n==2)&#123;</span><br><span class="line">            if(len+k-1&gt;=7)&#123;</span><br><span class="line">                ans = s2.substr(k) +ans ;</span><br><span class="line">            &#125;</span><br><span class="line">            else&#123;</span><br><span class="line">                ans = s2.substr(k,len) + ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/08/16/2019牛客暑期多校训练营（第九场-KnapsackCryptosystem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/16/2019牛客暑期多校训练营（第九场-KnapsackCryptosystem/" class="post-title-link" itemprop="url">折半搜索二进制枚举2019牛客暑期多校训练营第九场KnapsackCryptosystem</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-16 15:34:44" itemprop="dateCreated datePublished" datetime="2019-08-16T15:34:44+08:00">2019-08-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-17 23:35:05" itemprop="dateModified" datetime="2019-08-17T23:35:05+08:00">2019-08-17</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="折半搜索"><a href="#折半搜索" class="headerlink" title="折半搜索"></a>折半搜索</h3><p>把原数组分成两部分搜素，把相乘的复杂的变成相加的复杂度。</p>
<h3 id="二进制枚举"><a href="#二进制枚举" class="headerlink" title="二进制枚举"></a>二进制枚举</h3><p>暴力枚举所有可能的情况。  </p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p><a href="https://ac.nowcoder.com/acm/contest/889/D" target="_blank" rel="noopener">题目链接</a><br><img src="//RunoobACMer.github.io/2019/08/16/2019牛客暑期多校训练营（第九场-KnapsackCryptosystem/1.png" alt="图挂了"><br><img src="//RunoobACMer.github.io/2019/08/16/2019牛客暑期多校训练营（第九场-KnapsackCryptosystem/2.png" alt="图挂了"><br><img src="//RunoobACMer.github.io/2019/08/16/2019牛客暑期多校训练营（第九场-KnapsackCryptosystem/3.png" alt="图挂了"><br>题意：在n个数里找出若干个，其和为t，输出为二进制01串，表示对应位取或不取。(n&lt;=36)<br>思路：先折半，接着二进制枚举。<br><strong>（直接二进制枚举会2^36超时）</strong> 把2^36 变成了2乘2^18.<br>注意点：二进制枚举要尤其注意下标问题。<br>技巧：二进制转换。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(int j=0; j&lt;log(x); j++)</span><br><span class="line">  if(x &amp; 1&lt;&lt;j)</span><br><span class="line">    cout&lt;&lt;&apos;1&apos;;</span><br><span class="line">  else</span><br><span class="line">    cout&lt;&lt;&apos;0&apos;;</span><br></pre></td></tr></table></figure></p>
<p>完整代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#include&lt;set&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">int n;</span><br><span class="line">ll sum;</span><br><span class="line">ll a[50];</span><br><span class="line">ll b[50];</span><br><span class="line">int main() &#123;</span><br><span class="line">    set&lt;ll&gt; S;</span><br><span class="line">    map&lt;ll,ll&gt; M;</span><br><span class="line">    scanf(&quot;%d%lld&quot;,&amp;n,&amp;sum);</span><br><span class="line">    for(int i = 0; i &lt; n/2; i++)</span><br><span class="line">        scanf(&quot;%lld&quot;,&amp;a[i]);</span><br><span class="line">    for(int i=0;i&lt;n-(n/2);i++)              //数组下边必须从零开始(对应左移的j下标从0开始)</span><br><span class="line">        scanf(&quot;%lld&quot;,&amp;b[i]);</span><br><span class="line"></span><br><span class="line">    for(ll i = 1; i &lt; (1 &lt;&lt; (n/2)); i++) &#123;     //i一共2^n-1种状态   （从1到2^n-1）</span><br><span class="line">        ll temp = 0;                            //如果要从0开始，就把i初始值设为0，就是一个元素都不取</span><br><span class="line">        for(int j = 0; j &lt; n; j++) &#123;</span><br><span class="line">            if(i &amp; (1 &lt;&lt; j))                //j像是定位的标尺</span><br><span class="line">                temp += a[j];</span><br><span class="line">        &#125;</span><br><span class="line">        S.insert(temp);</span><br><span class="line">        M[temp] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for(ll i =1;i &lt; (1&lt;&lt;(n-(n/2)));i++)&#123;</span><br><span class="line">        ll temp = 0;</span><br><span class="line">        for(int j= 0;j&lt;n-(n/2);j++)&#123;</span><br><span class="line">            if(i &amp; (1 &lt;&lt; j))</span><br><span class="line">                temp += b[j];</span><br><span class="line">        &#125;</span><br><span class="line">        if(S.find(sum-temp) != S.end())&#123;</span><br><span class="line">            ll x = M[sum - temp];</span><br><span class="line">            ll y = i;</span><br><span class="line">            for(int j=0; j&lt;n/2; j++)</span><br><span class="line">                if(x &amp; 1&lt;&lt;j)</span><br><span class="line">                    cout&lt;&lt;&apos;1&apos;;</span><br><span class="line">                else</span><br><span class="line">                    cout&lt;&lt;&apos;0&apos;;</span><br><span class="line">            for(int j=0; j&lt;(n-(n/2)); j++)</span><br><span class="line">                if(y &amp; 1&lt;&lt;j)</span><br><span class="line">                    cout&lt;&lt;&apos;1&apos;;</span><br><span class="line">                else</span><br><span class="line">                    cout&lt;&lt;&apos;0&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/08/11/线段树专题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/11/线段树专题/" class="post-title-link" itemprop="url">线段树专题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-11 10:22:16" itemprop="dateCreated datePublished" datetime="2019-08-11T10:22:16+08:00">2019-08-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-13 15:35:35" itemprop="dateModified" datetime="2019-08-13T15:35:35+08:00">2019-08-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="线段树专题"><a href="#线段树专题" class="headerlink" title="线段树专题"></a>线段树专题</h1><p>目录</p>
<ul>
<li><a href="#1">写在前面</a></li>
<li><a href="#2">题目清单</a><ul>
<li><a href="#3">hdu1166 敌兵布阵</a></li>
<li><a href="#4">hdu1754 I Heat It</a></li>
<li><a href="#5">hdu1698 Just a Hook</a></li>
<li><a href="#6">poj3468 A Simple Problem with Integers</a></li>
<li><a href="#7">codeforces156A</a></li>
</ul>
</li>
<li><a href="#8">总结</a><h2 id="1">写在前面</h2><br>本文作为个人练习使用，不能保证思路每个人都看懂。但是可以提供由易到难的题目清单。将会持续更新。<br><h2 id="2">题目清单</h2>

</li>
</ul>
<p></p><h3 id="3"><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1166" target="_blank" rel="noopener">hdu1166 敌兵布阵</a></h3><br>//区间查询，点修改  (不含懒标记)<p></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#define lson tree[rt].l,mid,rt&lt;&lt;1</span><br><span class="line">#define rson mid+1,tree[rt].r,rt&lt;&lt;1|1</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn = 5e4+10;</span><br><span class="line">int ans;</span><br><span class="line">int a[maxn];</span><br><span class="line">struct&#123;</span><br><span class="line">    int l,r,sum;</span><br><span class="line">&#125;tree[maxn&lt;&lt;2];</span><br><span class="line"></span><br><span class="line">void build(int L,int R,int rt)&#123;</span><br><span class="line">    tree[rt].l = L,tree[rt].r = R;</span><br><span class="line">    if(tree[rt].l == tree[rt].r)&#123;</span><br><span class="line">     //   tree[rt].sum = a[L];</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;tree[rt].sum);</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    int mid = (L + R)&gt;&gt;1;</span><br><span class="line">    build(lson);</span><br><span class="line">    build(rson);</span><br><span class="line">    tree[rt].sum = tree[rt&lt;&lt;1].sum + tree[rt&lt;&lt;1|1].sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void add(int pos,int val,int rt)&#123;</span><br><span class="line">    if(tree[rt].l == tree[rt].r)&#123;</span><br><span class="line">        tree[rt].sum += val;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    int l = tree[rt].l, r = tree[rt].r;</span><br><span class="line">    int mid = (l+r)&gt;&gt;1;</span><br><span class="line">    tree[rt].sum += val;</span><br><span class="line">    if(pos&lt;=mid) add(pos,val,rt&lt;&lt;1);</span><br><span class="line">    if(pos&gt;mid) add(pos,val,rt&lt;&lt;1|1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void query(int L,int R,int rt)&#123;</span><br><span class="line">    int l = tree[rt].l, r = tree[rt].r;</span><br><span class="line">    int mid = (l + r)&gt;&gt;1;</span><br><span class="line">    if(L &lt;=l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">        ans += tree[rt].sum;</span><br><span class="line">//        cout&lt;&lt;l&lt;&lt;&quot; l r &quot;&lt;&lt;r&lt;&lt;&quot; tree[rt].sum &quot;&lt;&lt;tree[rt].sum&lt;&lt;endl;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    if(L &lt;= mid) query(L,R,rt&lt;&lt;1);</span><br><span class="line">    if(R &gt; mid) query(L,R,rt&lt;&lt;1|1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    int t; scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">    for(int p=1;p&lt;=t;p++)&#123;</span><br><span class="line">        printf(&quot;Case %d:\n&quot;,p);</span><br><span class="line">        int n; scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line"> //       for(int i=1;i&lt;=n;i++) scanf(&quot;%d&quot;,&amp;a[i]);</span><br><span class="line">        build(1,n,1);</span><br><span class="line">        char op[10];int L,R,pos,val;</span><br><span class="line">        while(1)&#123;</span><br><span class="line">            scanf(&quot;%s&quot;,op);</span><br><span class="line">            if(op[0] == &apos;E&apos;)</span><br><span class="line">                break;</span><br><span class="line">            if(op[0] == &apos;A&apos;)&#123;</span><br><span class="line">                scanf(&quot;%d%d&quot;,&amp;pos,&amp;val);</span><br><span class="line">                add(pos,val,1);</span><br><span class="line">            &#125;</span><br><span class="line">            if(op[0] == &apos;S&apos;)&#123;</span><br><span class="line">                scanf(&quot;%d%d&quot;,&amp;pos,&amp;val);</span><br><span class="line">                add(pos,-val,1);</span><br><span class="line">            &#125;</span><br><span class="line">            if(op[0] == &apos;Q&apos;)&#123;</span><br><span class="line">                ans = 0;</span><br><span class="line">                scanf(&quot;%d%d&quot;,&amp;L,&amp;R);</span><br><span class="line">                query(L,R,1);</span><br><span class="line">                printf(&quot;%d\n&quot;,ans);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">1</span><br><span class="line">10</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">Query 1 3</span><br><span class="line">Add 3 6</span><br><span class="line">Query 2 7</span><br><span class="line">Sub 10 2</span><br><span class="line">Add 6 3</span><br><span class="line">Query 3 10</span><br><span class="line">End</span><br><span class="line"></span><br><span class="line">Case 1:</span><br><span class="line">6</span><br><span class="line">33</span><br><span class="line">59</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p></p><h3 id="4"><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1754" target="_blank" rel="noopener">hdu1754 I Heat It</a></h3><br>//单点更新 查询区间最值 （不含懒标记）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn = 2e5+10;</span><br><span class="line">struct&#123;</span><br><span class="line">    int l, r,maxx;</span><br><span class="line">&#125;tree[maxn&lt;&lt;2];</span><br><span class="line">int a[maxn];</span><br><span class="line">void build(int l,int r,int rt)&#123;</span><br><span class="line">    tree[rt].l = l; tree[rt].r = r;</span><br><span class="line">    if(l == r)&#123;</span><br><span class="line">        tree[rt].maxx = a[l];</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    int mid = (l + r)&gt;&gt;1;</span><br><span class="line">    build(l, mid, rt&lt;&lt;1);</span><br><span class="line">    build(mid+1, r, rt&lt;&lt;1|1);</span><br><span class="line">    tree[rt].maxx = max(tree[rt&lt;&lt;1].maxx,tree[rt&lt;&lt;1|1].maxx);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int query(int l,int r,int rt)&#123;</span><br><span class="line">    if(tree[rt].l &gt;= l &amp;&amp; tree[rt].r &lt;= r)</span><br><span class="line">        return tree[rt].maxx;</span><br><span class="line">    int mid = (tree[rt].l + tree[rt].r)&gt;&gt;1;                         //误写成mid = (l+r)&gt;&gt;1</span><br><span class="line">    if(r &lt;= mid)&#123;</span><br><span class="line">        return query(l,r,rt&lt;&lt;1);</span><br><span class="line">    &#125;</span><br><span class="line">     if(l &gt; mid)&#123;</span><br><span class="line">        return query(l,r,rt&lt;&lt;1|1);</span><br><span class="line">    &#125;</span><br><span class="line">    if(r &gt; mid&amp;&amp;l&lt;=mid)&#123;</span><br><span class="line">        return max(query(l,mid,rt&lt;&lt;1),query(mid+1,r,rt&lt;&lt;1|1));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//int query(int l,int r,int rt)&#123;</span><br><span class="line">//    if(l &lt;= tree[rt].l &amp;&amp; tree[rt].r &lt;= r)&#123;</span><br><span class="line">//        return tree[rt].maxx;</span><br><span class="line">//    &#125;</span><br><span class="line">//    int mid = (tree[rt].l + tree[rt].r)&gt;&gt;1;</span><br><span class="line">//    int MAX = -1;</span><br><span class="line">//    if(l &lt;= mid)                            //fuck(r&lt;=mid)</span><br><span class="line">//        MAX  = max(MAX,query(l,r,rt&lt;&lt;1));</span><br><span class="line">//    if(r &gt; mid)</span><br><span class="line">//        MAX = max(MAX,query(l,r,rt&lt;&lt;1|1));</span><br><span class="line">//    return MAX;</span><br><span class="line">//&#125;</span><br><span class="line"></span><br><span class="line">void update(int pos,int k,int rt)&#123;</span><br><span class="line">    if(tree[rt].l == tree[rt].r)&#123;</span><br><span class="line">        tree[rt].maxx = k;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    int mid = (tree[rt].l + tree[rt].r)&gt;&gt;1;</span><br><span class="line">    if(pos &lt;= mid)&#123;</span><br><span class="line">        update(pos,k,rt&lt;&lt;1);                           //误写成update(tree[rt].l,mid,rt&lt;&lt;1);</span><br><span class="line">    &#125;</span><br><span class="line">    else&#123;</span><br><span class="line">        update(pos,k,rt&lt;&lt;1|1);</span><br><span class="line">    &#125;</span><br><span class="line">    tree[rt].maxx = max(tree[rt&lt;&lt;1].maxx,tree[rt&lt;&lt;1|1].maxx);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int n,m;</span><br><span class="line">int main()&#123;</span><br><span class="line">        while(~scanf(&quot;%d%d&quot;,&amp;n,&amp;m))&#123;</span><br><span class="line">        for(int i=1;i&lt;=n;i++) scanf(&quot;%d&quot;,&amp;a[i]);</span><br><span class="line">        build(1,n,1);</span><br><span class="line"></span><br><span class="line">        while(m--)&#123;</span><br><span class="line">            char op[5];int l,r;</span><br><span class="line">            scanf(&quot;%s%d%d&quot;,op,&amp;l,&amp;r);</span><br><span class="line">            if(op[0] == &apos;U&apos;)&#123;</span><br><span class="line">                update(l,r,1);</span><br><span class="line">            &#125;</span><br><span class="line">            if(op[0] == &apos;Q&apos;)&#123;</span><br><span class="line">                printf(&quot;%d\n&quot;,query(l,r,1));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">//            for(int i= 1 ;i&lt;=4*n;i++)&#123;</span><br><span class="line">//                cout&lt;&lt;tree[i].maxx&lt;&lt;&apos; &apos;;</span><br><span class="line">//            &#125;</span><br><span class="line">//            cout&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">5 6</span><br><span class="line">1 2 3 4 5</span><br><span class="line">Q 1 5</span><br><span class="line">U 3 6</span><br><span class="line">Q 3 4</span><br><span class="line">Q 4 5</span><br><span class="line">U 2 9</span><br><span class="line">Q 1 5</span><br><span class="line"></span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">9</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p></p>
<p></p><h3 id="5"><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1698" target="_blank" rel="noopener">hdu1698 Just a Hook</a></h3><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn = 1e5+10;</span><br><span class="line"></span><br><span class="line">struct&#123;</span><br><span class="line">    int l,r,val,lazy;</span><br><span class="line">&#125;tree[maxn&lt;&lt;2];</span><br><span class="line"></span><br><span class="line">int getlen(int rt)&#123;</span><br><span class="line">    return tree[rt].r - tree[rt].l + 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void push_down(int rt)&#123;</span><br><span class="line">    if(tree[rt].lazy)&#123;</span><br><span class="line">        tree[rt&lt;&lt;1].lazy = tree[rt].lazy;</span><br><span class="line">        tree[rt&lt;&lt;1|1].lazy = tree[rt].lazy;</span><br><span class="line">        tree[rt&lt;&lt;1].val = getlen(rt&lt;&lt;1)*tree[rt].lazy;</span><br><span class="line">        tree[rt&lt;&lt;1|1].val = getlen(rt&lt;&lt;1|1)*tree[rt].lazy;</span><br><span class="line">        tree[rt].lazy = 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void build(int l,int r,int rt)&#123;</span><br><span class="line">    tree[rt].l = l, tree[rt].r = r,tree[rt].lazy = 0;</span><br><span class="line">    int mid = (l + r)&gt;&gt;1;</span><br><span class="line">    if(l == r)&#123;</span><br><span class="line">        tree[rt].val = 1;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    build(l,mid,rt&lt;&lt;1);</span><br><span class="line">    build(mid+1,r,rt&lt;&lt;1|1);</span><br><span class="line">    tree[rt].val = tree[rt&lt;&lt;1].val + tree[rt&lt;&lt;1|1].val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void update(int L,int R,int num,int rt)&#123;</span><br><span class="line">    int l = tree[rt].l, r = tree[rt].r;</span><br><span class="line">    if(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">        tree[rt].lazy = num;</span><br><span class="line">        tree[rt].val = getlen(rt)*num;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    push_down(rt);</span><br><span class="line">    int mid = (l + r)&gt;&gt;1;</span><br><span class="line">    if(L&lt;=mid) update(L,R,num,rt&lt;&lt;1);</span><br><span class="line">    if(R&gt;mid) update(L,R,num,rt&lt;&lt;1|1);</span><br><span class="line">    tree[rt].val = tree[rt&lt;&lt;1].val + tree[rt&lt;&lt;1|1].val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int query()&#123;</span><br><span class="line">    return tree[1].val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    int ma=maxn&lt;&lt;2+1;</span><br><span class="line">    cout&lt;&lt;ma&lt;&lt;endl;</span><br><span class="line">    int t;int cnt = 0;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">    while(t--)&#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        int n,m; scanf(&quot;%d%d&quot;,&amp;n,&amp;m);</span><br><span class="line">//        for(int i=1;i&lt;=(n&lt;&lt;2+2);i++) tree[i].lazy = 0;</span><br><span class="line">        build(1,n,1);</span><br><span class="line">        int L,R,val;</span><br><span class="line">        for(int i=1;i&lt;=m;i++)&#123;</span><br><span class="line">            scanf(&quot;%d%d%d&quot;,&amp;L,&amp;R,&amp;val);</span><br><span class="line">            update(L,R,val,1);</span><br><span class="line">        &#125;</span><br><span class="line">        printf(&quot;Case %d: The total value of the hook is %d.\n&quot;,cnt,query());</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">4</span><br><span class="line">10</span><br><span class="line">2</span><br><span class="line">1 5 2</span><br><span class="line">5 9 3</span><br><span class="line">10</span><br><span class="line">2</span><br><span class="line">2 5 2</span><br><span class="line">5 9 2</span><br><span class="line">10</span><br><span class="line">2</span><br><span class="line">1 3 3</span><br><span class="line">5 5 3</span><br><span class="line">10</span><br><span class="line">2</span><br><span class="line">1 8 3</span><br><span class="line">5 8 2</span><br><span class="line"></span><br><span class="line">Case 1: The total value of the hook is 24.</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p></p>
<p></p><h2 id="6"><a href="http://poj.org/problem?id=3468" target="_blank" rel="noopener">poj3468 A Simple Problem with Integers</a></h2><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn = 1e5+10;</span><br><span class="line">struct&#123;</span><br><span class="line">    ll l,r;</span><br><span class="line">    ll lazy;</span><br><span class="line">    ll sum;</span><br><span class="line">&#125;tree[(maxn&lt;&lt;2)+10];</span><br><span class="line"></span><br><span class="line">ll getlen(int rt)&#123;</span><br><span class="line">    return tree[rt].r - tree[rt].l + 1;</span><br><span class="line">&#125;</span><br><span class="line">ll ans;</span><br><span class="line">void push_down(int rt)&#123;</span><br><span class="line">    if(tree[rt].lazy)&#123;</span><br><span class="line">        tree[rt&lt;&lt;1].lazy += tree[rt].lazy;</span><br><span class="line">        tree[rt&lt;&lt;1|1].lazy += tree[rt].lazy;</span><br><span class="line">        tree[rt&lt;&lt;1].sum += tree[rt].lazy*getlen(rt&lt;&lt;1);</span><br><span class="line">        tree[rt&lt;&lt;1|1].sum += tree[rt].lazy*getlen(rt&lt;&lt;1|1);</span><br><span class="line">        tree[rt].lazy = 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void build(ll l,ll r,int rt)&#123;</span><br><span class="line">    tree[rt].l = l, tree[rt].r = r,tree[rt].lazy=0;</span><br><span class="line">    ll mid = (l + r)&gt;&gt;1;</span><br><span class="line">    tree[rt].sum=0;</span><br><span class="line">    if(l == r)&#123;</span><br><span class="line">        scanf(&quot;%lld&quot;,&amp;tree[rt].sum);</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    build(l,mid,rt&lt;&lt;1);</span><br><span class="line">    build(mid+1,r,rt&lt;&lt;1|1);</span><br><span class="line">    tree[rt].sum = tree[rt&lt;&lt;1].sum + tree[rt&lt;&lt;1|1].sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void update(ll L,ll R,ll charge,int rt)&#123;</span><br><span class="line">    ll l = tree[rt].l, r = tree[rt].r;</span><br><span class="line">    ll mid = (l + r)&gt;&gt;1;</span><br><span class="line">    if(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">        tree[rt].lazy += charge;</span><br><span class="line">        tree[rt].sum += getlen(rt)*charge;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    push_down(rt);</span><br><span class="line">    if(L &lt;= mid) update(L,R,charge,rt&lt;&lt;1);</span><br><span class="line">    if(mid &lt; R) update(L,R,charge,rt&lt;&lt;1|1);</span><br><span class="line">    tree[rt].sum = tree[rt&lt;&lt;1].sum + tree[rt&lt;&lt;1|1].sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void query(ll L,ll R,int rt)&#123;</span><br><span class="line">    ll l = tree[rt].l, r = tree[rt].r;</span><br><span class="line">    ll mid = (l + r)&gt;&gt;1;</span><br><span class="line">    if(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">        ans += tree[rt].sum;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    push_down(rt);</span><br><span class="line">    if(L &lt;= mid) query(L,R,rt&lt;&lt;1);</span><br><span class="line">    if(mid &lt; R) query(L,R,rt&lt;&lt;1|1);</span><br><span class="line">    tree[rt].sum = tree[rt&lt;&lt;1].sum + tree[rt&lt;&lt;1|1].sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    while(~scanf(&quot;%lld%lld&quot;,&amp;n,&amp;m))&#123;</span><br><span class="line">        build(1,n,1);</span><br><span class="line">//        for(ll i=1;i&lt;=(n&lt;&lt;2)+2;i++) tree[i].lazy = 0;</span><br><span class="line">        char op[10];</span><br><span class="line">        while(m--)&#123;</span><br><span class="line">            scanf(&quot;%s&quot;,op);ll L,R,charge;</span><br><span class="line">            if(op[0] == &apos;Q&apos;)&#123;</span><br><span class="line">                scanf(&quot;%lld%lld&quot;,&amp;L,&amp;R);</span><br><span class="line">                ans = 0;</span><br><span class="line">                query(L,R,1);</span><br><span class="line">                printf(&quot;%lld\n&quot;,ans);</span><br><span class="line">            &#125; else&#123;</span><br><span class="line">                scanf(&quot;%lld%lld%lld&quot;,&amp;L,&amp;R,&amp;charge);</span><br><span class="line">                update(L,R,charge,1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">10 11</span><br><span class="line">1 2 3 4 5 6 7 8 9 10</span><br><span class="line">Q 4 4</span><br><span class="line">Q 1 10</span><br><span class="line">Q 2 4</span><br><span class="line">C 3 6 3</span><br><span class="line">Q 2 4</span><br><span class="line">C 2 4 4</span><br><span class="line">Q 1 3</span><br><span class="line">C 5 9 6</span><br><span class="line">Q 4 7</span><br><span class="line">C 1 1 2</span><br><span class="line">Q 1 1</span><br><span class="line"></span><br><span class="line">4</span><br><span class="line">55</span><br><span class="line">9</span><br><span class="line">15</span><br><span class="line">17</span><br><span class="line">53</span><br><span class="line">3</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p></p>
<p></p><h2 id="7"><a href="http://codeforces.com/contest/356" target="_blank" rel="noopener">codeforces356A</a></h2><p></p>
<ol>
<li>可以用并查集</li>
<li>可以用set</li>
<li>可以用线段树<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn = 3e5+10;</span><br><span class="line">int a[maxn];</span><br><span class="line">struct&#123;</span><br><span class="line">    int l, r, endd;</span><br><span class="line">&#125;tree[maxn&lt;&lt;2];</span><br><span class="line"></span><br><span class="line">void build(int l,int r,int rt)&#123;</span><br><span class="line">    tree[rt].l = l, tree[rt].r = r;</span><br><span class="line">    if(l == r) return ;</span><br><span class="line">    int mid = (l + r)&gt;&gt;1;</span><br><span class="line">    build(l , mid , rt&lt;&lt;1);</span><br><span class="line">    build(mid + 1, r , rt&lt;&lt;1|1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void update(int L,int R,int num,int rt)&#123;</span><br><span class="line">    int l = tree[rt].l, r = tree[rt].r;</span><br><span class="line">    int mid = (l + r)&gt;&gt;1;</span><br><span class="line">    if(tree[rt].endd)&#123;</span><br><span class="line">            if(a[tree[rt].endd] == 0 &amp;&amp; num != tree[rt].endd) a[tree[rt].endd] = num;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    if(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">        tree[rt].endd = num;</span><br><span class="line">        for(int i=l;i&lt;=r;i++)&#123;</span><br><span class="line">            if(i != num &amp;&amp; a[i] == 0) a[i] = num;</span><br><span class="line">        &#125;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    if(L &lt;= mid) update(L,R,num,rt&lt;&lt;1);</span><br><span class="line">    if(mid &lt; R) update(L,R,num,rt&lt;&lt;1|1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    int n,m; scanf(&quot;%d%d&quot;,&amp;n,&amp;m);</span><br><span class="line">    build(1,n,1);</span><br><span class="line">    int L,R,val;</span><br><span class="line">    while(m--)&#123;</span><br><span class="line">        scanf(&quot;%d%d%d&quot;,&amp;L,&amp;R,&amp;val);</span><br><span class="line">        update(L,R,val,1);</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">        printf(&quot;%d &quot;,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p></p><h2 id="8">总结</h2><p></p>
<ol>
<li>push_down在  if (L &lt;= l &amp;&amp; r &lt;= R)之后，<strong>否则在叶子节点接着向下访问</strong>，会导致数组越界<strong>RE</strong>。</li>
<li>在update中，先下传懒标记在push_up.</li>
<li>懒标记是<strong>给儿子用</strong>的.   儿子用父亲的lazy_tag。<br>例.tree[rt&lt;&lt;1].sum += <strong>tree[rt].lazy</strong> * getlen(rt&lt;&lt;1);   </li>
<li>push_up操作一共有3次<br>(1)<strong>Query()</strong> 对于大多数运算，应该是可以不加push_up的.因为原本tree[rt].sum=getlen(rt) <em> lazy；加上push_up后tree[rt].sum=tree[rt&lt;&lt;1].sum+tree[rt&lt;&lt;1|1].sum即tree[rt].lazy</em>getlen(rt&lt;&lt;1)+tree[rt].lazy<em>getlen(rt&lt;&lt;1|1);<br>提取公因式后，得到tree[rt].lazy</em>(getlen(rt&lt;&lt;1)+getlen(rt&lt;&lt;1|1)),即tree[rt].lazy*getlen(rt);两者应当是相等的。<br>但是如果本题不是加法，而是不满足结合律的运算。最好加上push_up。<br>(2)Update()<br>(3)Build()</li>
<li>push_down操作一共有两次<br>(1)Update()<br>(2)Query()     </li>
<li>tree[maxn&lt;&lt;2+100] 加运算优先，变成了左移102位，int（32位）左移102是0.(居然报tle)</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/08/10/简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/10/简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values/" class="post-title-link" itemprop="url">简单dp 2019牛客暑期多校训练营（第八场） Beauty Values</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-10 22:09:52 / Modified: 22:38:55" itemprop="dateCreated datePublished" datetime="2019-08-10T22:09:52+08:00">2019-08-10</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values"><a href="#简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values" class="headerlink" title="简单dp 2019牛客暑期多校训练营（第八场） Beauty Values"></a>简单dp 2019牛客暑期多校训练营（第八场） Beauty Values</h1><h2 id="题面"><a href="#题面" class="headerlink" title="题面"></a>题面</h2><p>(图片在./离散化文件夹下,不知道是不是因为这个标题有空格,图片插不进去)<br><img src="//RunoobACMer.github.io/2019/08/10/简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values/1.png" alt><br><img src="//RunoobACMer.github.io/2019/08/10/简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values/2.png" alt><br><img src="//RunoobACMer.github.io/2019/08/10/简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values/3.png" alt><br><a href="https://ac.nowcoder.com/acm/contest/888/B" target="_blank" rel="noopener">题面链接</a>   </p>
<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>找出所有区间，各个区间的不同元素个数的和。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>显然，i-1位的个数和i位有关系。<br><img src="//RunoobACMer.github.io/2019/08/10/简单dp-2019牛客暑期多校训练营（第八场）-Beauty-Values/4.png" alt><br><strong>解释</strong> 图中红色的2，代表（4-2），即后边一列4个3，减去最后一次出现的3的个数。</p>
<p>我们发现，对于从未出现过的第i位。dp[i] = dp[i-1] + i;<br>对于曾经出现过的第i位。dp[i] = dp[i-1] + i - vis[a[i]];<br>vis[]数组， 像一个桶，记录上一次a[i]出现的位置。（未出现是0，需要保持更新）<br>最后把dp[]数组加一遍即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line"></span><br><span class="line">const int maxn = 1e5+10;</span><br><span class="line">int a[maxn],vis[maxn];</span><br><span class="line">ll dp[maxn];</span><br><span class="line">int main()&#123;</span><br><span class="line">    //输入过程</span><br><span class="line">    int n;scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">    for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    //初始化</span><br><span class="line">    dp[1] = 1;</span><br><span class="line">    vis[a[1]] = 1;</span><br><span class="line"></span><br><span class="line">    for(int i=2;i&lt;=n;i++)&#123;</span><br><span class="line">        //a[i]未出现过</span><br><span class="line">        if(vis[a[i]]==0)&#123;</span><br><span class="line">            dp[i] = dp[i-1] + i;</span><br><span class="line">            vis[a[i]] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        //a[i]出现过</span><br><span class="line">        else&#123;</span><br><span class="line">            dp[i] = dp[i-1] +i - vis[a[i]];</span><br><span class="line">            vis[a[i]] = i;  ///vis[i]保持更新，最近一次a[i]出现的位置</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans = 0;</span><br><span class="line">    for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">        ans += dp[i];</span><br><span class="line">    &#125;</span><br><span class="line">    printf(&quot;%lld\n&quot;,ans);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="tip"><a href="#tip" class="headerlink" title="tip"></a>tip</h2><p>dp[]爆int。  </p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/08/07/树状数组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/07/树状数组/" class="post-title-link" itemprop="url">树状数组</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-07 10:51:13 / Modified: 11:00:09" itemprop="dateCreated datePublished" datetime="2019-08-07T10:51:13+08:00">2019-08-07</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>用二进制性质，快速维护数组。</p>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><ol>
<li>求前缀和（ 两前缀和相减，得到区间和）</li>
<li>单点修改   </li>
</ol>
<h2 id="拓展操作-（差分数组）"><a href="#拓展操作-（差分数组）" class="headerlink" title="拓展操作 （差分数组）"></a>拓展操作 （差分数组）</h2><ol start="3">
<li>区间修改</li>
<li>单点查询       </li>
</ol>
<h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><p>板子：<br>P3374<br>P3368<br>动脑子：<br>P1908逆序对  codeforces 652D Nested Segments  </p>
<h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">const int maxn = 5e5+5;</span><br><span class="line">int tree[4*maxn];</span><br><span class="line">int m,n;</span><br><span class="line">inline int lowbit(int x)&#123;</span><br><span class="line">    int temp = x &amp; -x;</span><br><span class="line">    return temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void add(int pos,int k)&#123;</span><br><span class="line">    while(pos&lt;=n)&#123;</span><br><span class="line">        tree[pos] += k;</span><br><span class="line">        pos += lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int sum(int pos)&#123;</span><br><span class="line">    int ans=0;</span><br><span class="line">    while(pos&gt;=1)&#123;</span><br><span class="line">        ans += tree[pos];</span><br><span class="line">        pos -= lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    scanf(&quot;%d%d&quot;,&amp;n,&amp;m);</span><br><span class="line">    for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">        int temp;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;temp);</span><br><span class="line">        add(i,temp);</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=1;i&lt;=m;i++)&#123;</span><br><span class="line">        int a,b,c;</span><br><span class="line">        scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        if(a==1)&#123;</span><br><span class="line">            add(b,c);</span><br><span class="line">        &#125; else&#123;</span><br><span class="line">            printf(&quot;%d\n&quot;,sum(c) - sum(b-1));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0 ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/08/07/离散化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/07/离散化/" class="post-title-link" itemprop="url">离散化</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-08-07 10:26:29 / Modified: 10:50:39" itemprop="dateCreated datePublished" datetime="2019-08-07T10:26:29+08:00">2019-08-07</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="离散化"><a href="#离散化" class="headerlink" title="离散化"></a>离散化</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>维护数据大小顺序，压缩数值。</p>
<h2 id="两种离散化"><a href="#两种离散化" class="headerlink" title="两种离散化"></a>两种离散化</h2><ol>
<li><p>对应id的大小关系</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">struct node&#123;</span><br><span class="line">    int val,id;</span><br><span class="line">    node(int _val,int _id)&#123;</span><br><span class="line">        val = _val, id =  _id;</span><br><span class="line">    &#125;;</span><br><span class="line">    node()&#123;&#125;;</span><br><span class="line">&#125;a[8];</span><br><span class="line">int rankk[100];</span><br><span class="line">bool cmp(node n1,node n2)&#123;</span><br><span class="line">    return n1.val &lt; n2.val;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">    ///离散化</span><br><span class="line">    a[1] = node(81,1);</span><br><span class="line">    a[2] = node(33,2);</span><br><span class="line">    a[3] = node(23,3);</span><br><span class="line">    a[4] = node(46,4);</span><br><span class="line">    a[5] = node(12,5);</span><br><span class="line">    a[6] = node(92,6);</span><br><span class="line">    a[7] = node(10,7);</span><br><span class="line">    cout&lt;&lt;&quot;处理前&quot;&lt;&lt;endl;</span><br><span class="line">    for(int i=1;i&lt;=7;i++)&#123;</span><br><span class="line">        cout&lt;&lt;&quot;id为 &quot;&lt;&lt;a[i].id&lt;&lt;&quot; -&gt; &quot;&lt;&lt;&quot;键值为&quot;&lt;&lt;a[i].val&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(a+1,a+8,cmp);</span><br><span class="line">    cout&lt;&lt;&quot;排序后&quot;&lt;&lt;endl;</span><br><span class="line">    for(int i=1;i&lt;=7;i++)&#123;</span><br><span class="line">        cout&lt;&lt;&quot;id为 &quot;&lt;&lt;a[i].id&lt;&lt;&quot; -&gt; &quot;&lt;&lt;&quot;键值为&quot;&lt;&lt;a[i].val&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=1;i&lt;8;i++)&#123;</span><br><span class="line">        rankk[a[i].id] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;&quot;离散化之后 保存了大小关系不变&quot;&lt;&lt;endl;</span><br><span class="line">    for(int i=1;i&lt;=7;i++)&#123;</span><br><span class="line">        cout&lt;&lt;rankk[i]&lt;&lt;&apos; &apos;;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>维护大小关系</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Nested Segments 代码片段</span><br><span class="line">    sort(a+1,a+1+n,cmp1); 	///右端点排序</span><br><span class="line">    for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">        a[i].r = i;				///把-1e9到1e9的数据压缩到了n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><ol>
<li>codeforces 652D Nested Segments</li>
<li>洛谷p1908 逆序对<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2>离散化和<strong>树状数组</strong>常常一起出现。</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/07/31/数论-威尔逊定理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/31/数论-威尔逊定理/" class="post-title-link" itemprop="url">数论-威尔逊定理</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-07-31 20:08:48" itemprop="dateCreated datePublished" datetime="2019-07-31T20:08:48+08:00">2019-07-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-01 09:35:11" itemprop="dateModified" datetime="2019-08-01T09:35:11+08:00">2019-08-01</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="先理解同余"><a href="#先理解同余" class="headerlink" title="先理解同余"></a>先理解同余</h1><p> 若a≡b(mod m)<br> 则a=b+km</p>
<h1 id="威尔逊定理"><a href="#威尔逊定理" class="headerlink" title="威尔逊定理"></a>威尔逊定理</h1><p>（p-1)! ≡ -1  mod(p)<br>其中P必须是素数<br> 用人话解释一下：（p-1）!和 -1 关于P同余，-1加p是p-1，（p-1）！ 和 p-1 同余。<br> 两边同时除以（p-1），发现（p-2）！为1。<br> Q！mod（p） 可化为(p-2)!/(p-2)<em>(p-1)</em>…..<em>(Q+1);<br> 我们只要求 1/(p-2)</em>(p-1)<em>…..</em>(Q+1)即可，<br> 即他们的逆元相乘。</p>
<h3 id="int128的使用"><a href="#int128的使用" class="headerlink" title="__int128的使用"></a>__int128的使用</h3><p>在windows下无法编译，linux下能编译，不能用cin，cout，需要手写读入和输出函数。<br> 代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">typedef unsigned long long ull;</span><br><span class="line">using namespace std;</span><br><span class="line">ull P;</span><br><span class="line">__int128 _a,_b,_m;</span><br><span class="line">ull mul (ull a, ull b, ull m) &#123;</span><br><span class="line">	_a = a, _b = b, _m = m;</span><br><span class="line">	return (ull)(_a * _b % _m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ull powerMod(ull x, ull n,ull m) &#123;</span><br><span class="line">    ull res = 1;</span><br><span class="line">    while (n &gt; 0) &#123;</span><br><span class="line">        if  (n &amp; 1) //  判断是否为奇数，若是则true</span><br><span class="line">            res = mul(res,x,m);</span><br><span class="line">        x = mul(x,x,m);</span><br><span class="line">        n &gt;&gt;= 1;    //  相当于n /= 2;</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ull getInv(ull a, ull b, ull m)&#123;</span><br><span class="line">    return powerMod(a,b,m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inline bool check(ull n)&#123;</span><br><span class="line">    for(ull i=2;i*i&lt;=n;i++)&#123;</span><br><span class="line">        if(n%i==0)</span><br><span class="line">            return 1;</span><br><span class="line">    &#125;</span><br><span class="line">        return 0;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    int t;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">    while(t--)&#123;</span><br><span class="line">        scanf(&quot;%llu&quot;,&amp;P);</span><br><span class="line">        ull temp = P-1;</span><br><span class="line">        ull now = P-1;</span><br><span class="line">        while(check(now))&#123;</span><br><span class="line">            temp = mul(temp,getInv(now,P-2,P),P);</span><br><span class="line">            now--;</span><br><span class="line">        &#125;</span><br><span class="line">        int dka=0;</span><br><span class="line">        for(int j=1;j&lt;1000;j++)&#123;</span><br><span class="line">            for(int i=1;i&lt;=10000;i++)&#123;</span><br><span class="line">                dka = (dka*i)%P;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        printf(&quot;%llu\n&quot;,temp);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/07/30/树的直径/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/30/树的直径/" class="post-title-link" itemprop="url">树的直径</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-07-30 21:21:41" itemprop="dateCreated datePublished" datetime="2019-07-30T21:21:41+08:00">2019-07-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-31 08:15:06" itemprop="dateModified" datetime="2019-07-31T08:15:06+08:00">2019-07-31</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>思路：两个距离最长的点的距离，就是树的直径，每个人要走的距离，直径/2向上取整，就是（直径+1）/2；<br>代码实现：以一个有人的节点开始深搜，找到最远的有人的节点，再以这个节点为起点深搜，最远的点就是树的直径。<br><img src="//RunoobACMer.github.io/2019/07/30/树的直径/1.png" alt="1"><br><img src="//RunoobACMer.github.io/2019/07/30/树的直径/2.png" alt="2"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">typedef long long ll;</span><br><span class="line">const int maxn = 1e5+10;</span><br><span class="line">struct Edge&#123;</span><br><span class="line">    int v;</span><br><span class="line">    int next;</span><br><span class="line">&#125;edge[maxn*2];</span><br><span class="line">int head[maxn];</span><br><span class="line">int mark[maxn];</span><br><span class="line">int n,m;</span><br><span class="line">int num=1;</span><br><span class="line">int ans = 0;</span><br><span class="line">int pos;</span><br><span class="line">void init()&#123;</span><br><span class="line">    for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">        head[i] = -1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dfs(int now,int father,int d)&#123;</span><br><span class="line">    if(mark[now] &amp;&amp; ans &lt; d)&#123;</span><br><span class="line">        ans = d;</span><br><span class="line">        pos = now;</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i = head[now]; i != -1; i = edge[i].next)&#123;</span><br><span class="line">        if(edge[i].v == father) continue;</span><br><span class="line">        dfs(edge[i].v,now,d+1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void addedge(int v,int u)&#123;</span><br><span class="line">    edge[num].v = v;</span><br><span class="line">    edge[num].next = head[u];</span><br><span class="line">    head[u] = num++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    while(~scanf(&quot;%d%d&quot;,&amp;n,&amp;m))&#123;</span><br><span class="line">        init();</span><br><span class="line">        int from,to;</span><br><span class="line">        for(int i=1;i&lt;=n-1;i++)&#123;</span><br><span class="line">            scanf(&quot;%d%d&quot;,&amp;from,&amp;to);</span><br><span class="line">            addedge(from,to);</span><br><span class="line">            addedge(to,from);</span><br><span class="line">        &#125;</span><br><span class="line">//        for(int u=1;u&lt;=n;u++)&#123;</span><br><span class="line">//            for(int j = head[u]; j != -1; j = edge[j].next)&#123;</span><br><span class="line">//                cout&lt;&lt; u &lt;&lt; &quot; -&gt; &quot;&lt;&lt; edge[j].v &lt;&lt;endl;</span><br><span class="line">//            &#125;</span><br><span class="line">//        &#125;</span><br><span class="line">        int box;</span><br><span class="line">        for(int i=1;i&lt;=m;i++)&#123;</span><br><span class="line">            scanf(&quot;%d&quot;,&amp;box);</span><br><span class="line">            mark[box] = 1;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(box,-1,0);</span><br><span class="line">        dfs(pos,-1,0);</span><br><span class="line">        cout&lt;&lt;(ans+1)/2&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/07/19/逻辑题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/19/逻辑题/" class="post-title-link" itemprop="url">逻辑题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-07-19 19:22:34 / Modified: 19:56:48" itemprop="dateCreated datePublished" datetime="2019-07-19T19:22:34+08:00">2019-07-19</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="逻辑复杂题"><a href="#逻辑复杂题" class="headerlink" title="逻辑复杂题"></a>逻辑复杂题</h1><p>题面<a href="https://codeforces.com/problemset/problem/1185/B" target="_blank" rel="noopener">https://codeforces.com/problemset/problem/1185/B</a><br><img src="//RunoobACMer.github.io/2019/07/19/逻辑题/1.png" alt="图挂了"><br>题意：坏了个键盘，按一下出现若次字母，但是不能按了不出现。判断输入前一个串，能不能得到第二个串。<br><strong>逻辑复杂一定要画流程图</strong><br><img src="//RunoobACMer.github.io/2019/07/19/逻辑题/2.png" alt="图挂了"><br> 代码：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;algorithm&gt;</span><br><span class="line">typedef long long ll;</span><br><span class="line">using namespace std;</span><br><span class="line">const int maxn = 1e6+10;</span><br><span class="line">char a[maxn];</span><br><span class="line">char b[maxn];</span><br><span class="line">int n,len1,len2;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    while(~scanf(&quot;%d&quot;,&amp;n))</span><br><span class="line">    &#123;</span><br><span class="line">        scanf(&quot;%s%s&quot;,a+1,b+1);</span><br><span class="line">        len1 = strlen(a+1);</span><br><span class="line">        len2 = strlen(b+1);</span><br><span class="line">        int flag = 1;</span><br><span class="line">        if(a[1]!=b[1])</span><br><span class="line">            flag = 0;</span><br><span class="line">        else if(len1&gt;len2)</span><br><span class="line">            flag = 0;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            for(int i=1,j=1; i&lt;=len1; )</span><br><span class="line">            &#123;</span><br><span class="line">                if(a[i+1]==b[j+1])</span><br><span class="line">                &#123;i++;j++;&#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    j++;</span><br><span class="line">                    if(a[i]==b[j])</span><br><span class="line">                        continue;</span><br><span class="line">                    else</span><br><span class="line">                    &#123;</span><br><span class="line">                        i++;</span><br><span class="line">                        if(a[i]==b[j])</span><br><span class="line">                            continue;</span><br><span class="line">                        else</span><br><span class="line">                        &#123;</span><br><span class="line">                            flag = 0;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(flag)</span><br><span class="line">            cout&lt;&lt;&quot;YES&quot;&lt;&lt;endl;</span><br><span class="line">        else</span><br><span class="line">            cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://RunoobACMer.github.io/2019/05/14/逻辑错题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chen_zhuozhuo">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/14/逻辑错题/" class="post-title-link" itemprop="url">思维坑题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-05-14 22:00:41" itemprop="dateCreated datePublished" datetime="2019-05-14T22:00:41+08:00">2019-05-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-07-19 20:32:57" itemprop="dateModified" datetime="2019-07-19T20:32:57+08:00">2019-07-19</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="纪念我做过的逻辑坑题"><a href="#纪念我做过的逻辑坑题" class="headerlink" title="纪念我做过的逻辑坑题"></a>纪念我做过的逻辑坑题</h3><p>1.<br><img src="//RunoobACMer.github.io/2019/05/14/逻辑错题/1.png" alt="图挂了"><br>机器人走循环，没考虑一个回个走回原点的情况。</p>
<p>2.<br><img src="//RunoobACMer.github.io/2019/05/14/逻辑错题/2.png" alt="图挂了"><br>每次除2，向上取整，直接求n次之后的数。<br>(1) 朴素的求，tle。<br>(2) 先求2的n次快速幂，再除以这个数（有小数向上加一），c++爆re，因为出现较大的浮点数。<br>java快速幂没爆re，过了。  而且尼玛java压根没用快速幂，直接Math.pow()。mmp<br>(3) 正规的解法，2的30次方超过了数据范围，只要进行30次即可。<br>(4) 尽管快速幂只有最后一次向上取整，朴素只要除2有余数就向上取整（很多次取整）事实上两者相等。（快速幂小数是0.几几几几，朴素是0.5）  </p>
<p>3.<br><img src="//RunoobACMer.github.io/2019/05/14/逻辑错题/3.png" alt="图挂了"><br>几堆石子，两种操作，（1）移除一个（2）移动一个。多少次操作能每堆数量一致。<br>误解：从最大的开始往最小的移动。。。。。<br>正解：对应减去最终态的值,将正值求和。（<strong>我们只关心最终状态</strong>）  </p>
<p>4.<br><img src="//RunoobACMer.github.io/2019/05/14/逻辑错题/4.png" alt="图挂了"><br>bfs本来若干个@（肯德基店），搜索若干次。tle<br>应该一次搜完一张图，不是见到@就return 大大节省时间。  </p>
<p>5.没有图了，射泡泡的那题等等。有时候不用跑完一张图的每一个点，对角线跑一遍即可。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Chen_zhuozhuo</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chen_zhuozhuo</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.0"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
